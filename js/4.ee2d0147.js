(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"1b62":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("EvenlyArticle",{scopedSlots:t._u([{key:"head",fn:function(){return[t._v("日程調整")]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"col-6"},[n("q-select",{attrs:{filled:"",label:"name",options:t.userlist},on:{input:t.toChousei},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)]},proxy:!0}])}),n("EvenlyArticle",{scopedSlots:t._u([{key:"head",fn:function(){return[t._v("候補日")]},proxy:!0},{key:"body",fn:function(){return t._l(t.candidateDate,(function(e,r){return n("span",{key:r},[t._v("\n        "+t._s(t.toLocateDate(e.candidate_date))+"\n      ")])}))},proxy:!0}])}),n("EvenlyArticle",{scopedSlots:t._u([{key:"head",fn:function(){return[t._v("回答者")]},proxy:!0},{key:"body",fn:function(){return t._l(t.respondent,(function(e,r){return n("span",{key:r},[t._v("\n        "+t._s(e.user_name)+"\n      ")])}))},proxy:!0}])})],1)},a=[],c=(n("7f7f"),n("6762"),n("2fdb"),n("7514"),n("967e")),o=n.n(c),u=(n("96cf"),n("fa84")),s=n.n(u),i=n("2ef0"),l=n.n(i),p=n("4177"),f=n("cc01"),h=n("4dd5"),d={name:"Top",components:{EvenlyArticle:p["a"]},data:function(){return{getUserResponse:Object,userlist:Array,candidateDate:Array,respondent:Array,model:null}},mounted:function(){this.initForm()},methods:{authCheck:function(){var t=this;return s()(o.a.mark((function e(){var n,r,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.authenticatedCheck();case 3:if(n=e.sent,!n){e.next=6;break}return e.abrupt("return");case 6:return r={KEY:null},e.next=9,window.prompt("Please input your key!!");case 9:return r.KEY=e.sent,e.next=12,f["a"].authentication(r);case 12:if(a=e.sent,console.log(a.data),!a.apiStatus||"ok"!==a.apiStatus.value){e.next=19;break}console.log("OK"),localStorage.token=a.data.token,e.next=21;break;case 19:throw console.log("BAD"),new Error;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](0),console.log(e.t0),t.toError401();case 27:case"end":return e.stop()}}),e,null,[[0,23]])})))()},authenticatedCheck:function(){return s()(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(localStorage.token){t.next=2;break}return t.abrupt("return",!1);case 2:return e={token:localStorage.token},t.next=5,f["a"].checkToken(e);case 5:return n=t.sent,t.abrupt("return",n.apiStatus&&"ok"===n.apiStatus.value);case 7:case"end":return t.stop()}}),t)})))()},toError401:function(){console.log("toError401"),this.$router.push({path:"auth_error"})},initForm:function(){var t=this;return s()(o.a.mark((function e(){var n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.authCheck();case 2:return e.next=4,f["b"].getUser();case 4:return t.getUserResponse=e.sent,t.userlist=l.a.map(t.getUserResponse,"name"),e.next=8,f["b"].getCandidateDate(Object(h["a"])());case 8:n=e.sent,t.candidateDate=n.date,t.respondent=n.user;case 11:case"end":return e.stop()}}),e)})))()},toChousei:function(){var t=this,e=l.a.find(this.getUserResponse,(function(e){return l.a.includes(e.name,t.model)}));this.$store.commit("user/updateUserData",e),this.$router.push({path:"user",query:e})},toResult:function(){console.log("集計結果画面")},toLocateDate:function(t){return new Date(t).toLocaleDateString()}}},v=d,k=n("2877"),m=n("eebe"),w=n.n(m),y=n("9989"),b=n("ddd8"),x=n("9c40"),g=Object(k["a"])(v,r,a,!1,null,null,null);e["default"]=g.exports;w()(g,"components",{QPage:y["a"],QSelect:b["a"],QBtn:x["a"]})},4177:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"q-pa-md"},[n("div",{staticClass:"row justify-start text-h6"},[n("div",{staticClass:"self-center"},[t._t("head")],2)])]),n("div",[n("div",{staticClass:"row justify-evenly text-subtitle1"},[t._t("body")],2)])])},a=[],c={name:"evenly-article",data:function(){return{}}},o=c,u=n("2877"),s=Object(u["a"])(o,r,a,!1,null,null,null);e["a"]=s.exports},"4dd5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+2,r=n<10?"0".concat(n):"".concat(n);return e+r}},cc01:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return w}));var r=n("967e"),a=n.n(r),c=(n("96cf"),n("fa84")),o=n.n(c),u=n("fc74"),s=n.n(u),i=n("c47a"),l=n.n(i),p=n("b383"),f=n.n(p),h=n("d3ec"),d=n.n(h),v=function t(){s()(this,t)};l()(v,"makeGetUrl",(function(t,e){return t+(d.a.empty(e)?"":"?".concat(f.a.stringify(e)))})),l()(v,"httpHeaders",(function(){return{"X-Requested-With":"csrf","Content-Type":"application/json"}})),l()(v,"toJson",(function(t){return t.json()})),l()(v,"fetchGet",function(){var t=o()(a.a.mark((function t(e){var n,r=arguments;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t.prev=1,t.next=4,window.fetch(v.makeGetUrl(e,n),{method:"GET",headers:v.httpHeaders()});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t["catch"](1),console.log(t.t0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()),l()(v,"fetchPost",function(){var t=o()(a.a.mark((function t(e,n){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.fetch(e,{method:"POST",headers:v.httpHeaders(),body:JSON.stringify(n)});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),l()(v,"fetchPatch",function(){var t=o()(a.a.mark((function t(e,n){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.fetch(e,{method:"PATCH",headers:v.httpHeaders(),body:JSON.stringify(n)});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),l()(v,"fetchDelete",function(){var t=o()(a.a.mark((function t(e){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.fetch(e,{method:"DELETE",headers:v.httpHeaders()});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t["catch"](0),console.log(t.t0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}());var k={};k.BASE_URL="".concat("https://morning-peak-53590.herokuapp.com","/mng"),k.AUTH_URL="".concat("https://on8ch3z0n8.execute-api.ap-northeast-1.amazonaws.com/dev");var m={getUser:function(){return v.fetchGet("".concat(k.BASE_URL,"/user")).then((function(t){return v.toJson(t)}))},getUserSetDate:function(t){return v.fetchGet("".concat(k.BASE_URL,"/date/user"),t).then((function(t){return v.toJson(t)}))},getCandidateDate:function(t){return v.fetchGet("".concat(k.BASE_URL,"/date/month/").concat(t)).then((function(t){return v.toJson(t)}))},patchCandidateDateStatus:function(t,e){return v.fetchPatch("".concat(k.BASE_URL,"/date/").concat(t),e)}},w={authentication:function(t){return v.fetchPost("".concat(k.AUTH_URL,"/auth-api/authentication"),t).then((function(t){return v.toJson(t)}))},checkToken:function(t){return v.fetchPost("".concat(k.AUTH_URL,"/auth-api/check-token"),t).then((function(t){return v.toJson(t)}))}}}}]);